{"ast":null,"code":"import request from \"@/utils/index\";\nconst {\n  ElMessage\n} = require(\"element-plus\");\nexport default {\n  name: \"login\",\n  data() {\n    return {\n      identity: \"\",\n      form: {\n        username: \"\",\n        password: \"\",\n        identity: \"\"\n      },\n      rules: {\n        username: [{\n          required: true,\n          message: \"请输入账号\",\n          trigger: \"blur\"\n        }],\n        password: [{\n          required: true,\n          message: \"请输入密码\",\n          trigger: \"blur\"\n        }],\n        identity: [{\n          required: true,\n          message: \"请选择身份\",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  computed: {\n    disabled() {\n      const {\n        username,\n        password,\n        identity\n      } = this.form;\n      return Boolean(username && password && identity);\n    }\n  },\n  methods: {\n    login() {\n      this.$refs.form.validate(valid => {\n        if (valid) {\n          console.log(this.form.username);\n          console.log(this.form.password);\n          console.log(this.form.identity);\n          this.identity = this.form.identity;\n          const temp = \"/\" + this.identity + \"/login\";\n          console.log(temp);\n          request.post(\"/\" + this.identity + \"/login\", this.form).then(res => {\n            if (res.code === 200) {\n              console.log(\"chengg\");\n              ElMessage({\n                message: \"登陆成功\",\n                type: \"success\"\n              });\n              // 登陆成功跳转主页\n              window.sessionStorage.setItem(\"user\", JSON.stringify(res.data));\n              window.sessionStorage.setItem(\"identity\", JSON.stringify(this.form.identity));\n              this.$router.replace({\n                path: \"/home\"\n              });\n\n              //   this.$router.push 会向history栈中添加一个新的记录，因此用户可以通过浏览器的后退按钮返回到之前的页面。\n              // this.$router.replace 会替换当前的history栈中的记录，因此用户无法通过浏览器的后退按钮返回到之前的页面。\n              // 用途:\n              // this.$router.push 通常用于实现普通的页面跳转，例如从一个页面跳转到另一个页面。\n              // this.$router.replace 通常用于实现某些特殊的页面跳转需求，例如在表单提交成功后，将用户重定向到另一个页面，而且用户无法回退到表单提交前的页面\n              console.log(res.data);\n            } else {\n              console.log(\"fail\");\n              console.log(res.message);\n              ElMessage({\n                message: res.message,\n                type: \"error\"\n              });\n            }\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["request","ElMessage","require","name","data","identity","form","username","password","rules","required","message","trigger","computed","disabled","Boolean","methods","login","$refs","validate","valid","console","log","temp","post","then","res","code","type","window","sessionStorage","setItem","JSON","stringify","$router","replace","path"],"sources":["C:/Users/zhang/Desktop/myvueeee/flowers/src/assets/js/login.js"],"sourcesContent":["import request from \"@/utils/index\";\r\n\r\nconst {ElMessage} = require(\"element-plus\");\r\nexport default {\r\n    name: \"login\",\r\n    data() {\r\n        return {\r\n            identity: \"\",\r\n            form: {\r\n                username: \"\",\r\n                password: \"\",\r\n                identity: \"\",\r\n            },\r\n            rules: {\r\n                username: [\r\n                    {required: true, message: \"请输入账号\", trigger: \"blur\"},\r\n                ],\r\n                password: [{required: true, message: \"请输入密码\", trigger: \"blur\"}],\r\n                identity: [{required: true, message: \"请选择身份\", trigger: \"blur\"}],\r\n            },\r\n        };\r\n    },\r\n    computed: {\r\n        disabled() {\r\n            const {username, password, identity} = this.form;\r\n            return Boolean(username && password && identity);\r\n        },\r\n    },\r\n    methods: {\r\n        login() {\r\n            this.$refs.form.validate((valid) => {\r\n                if (valid) {\r\n                    console.log(this.form.username)\r\n                    console.log(this.form.password)\r\n                    console.log(this.form.identity)\r\n                    this.identity = this.form.identity;\r\n                    const temp = \"/\" + this.identity + \"/login\"\r\n                    console.log(temp)\r\n                    request.post(\"/\" + this.identity + \"/login\", this.form).then((res) => {\r\n                        if (res.code === 200) {\r\n                            console.log(\"chengg\")\r\n                            ElMessage({\r\n                                message: \"登陆成功\",\r\n                                type: \"success\",\r\n                            });\r\n                           // 登陆成功跳转主页\r\n                            window.sessionStorage.setItem(\"user\", JSON.stringify(res.data));\r\n                            window.sessionStorage.setItem(\"identity\", JSON.stringify(this.form.identity));\r\n                           this.$router.replace({path: \"/home\"});\r\n                          \r\n//   this.$router.push 会向history栈中添加一个新的记录，因此用户可以通过浏览器的后退按钮返回到之前的页面。\r\n// this.$router.replace 会替换当前的history栈中的记录，因此用户无法通过浏览器的后退按钮返回到之前的页面。\r\n// 用途:\r\n// this.$router.push 通常用于实现普通的页面跳转，例如从一个页面跳转到另一个页面。\r\n// this.$router.replace 通常用于实现某些特殊的页面跳转需求，例如在表单提交成功后，将用户重定向到另一个页面，而且用户无法回退到表单提交前的页面\r\n                            console.log(res.data)\r\n                        } else {\r\n                            console.log(\"fail\")\r\n                            console.log(res.message)\r\n                            ElMessage({\r\n                                \r\n                                message: res.message,\r\n                                type: \"error\",\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        },\r\n    },\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}