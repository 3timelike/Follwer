{"ast":null,"code":"'use strict';\n\nrequire(\"core-js/modules/es.array.push.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar shared = require('@vue/shared');\nvar lodashUnified = require('lodash-unified');\nrequire('../../../utils/index.js');\nvar token = require('./token.js');\nvar ElOptions = vue.defineComponent({\n  name: \"ElOptions\",\n  setup(_, {\n    slots\n  }) {\n    const select = vue.inject(token.selectKey);\n    let cachedValueList = [];\n    return () => {\n      var _a, _b;\n      const children = (_a = slots.default) == null ? void 0 : _a.call(slots);\n      const valueList = [];\n      function filterOptions(children2) {\n        if (!shared.isArray(children2)) return;\n        children2.forEach(item => {\n          var _a2, _b2, _c, _d;\n          const name = (_a2 = (item == null ? void 0 : item.type) || {}) == null ? void 0 : _a2.name;\n          if (name === \"ElOptionGroup\") {\n            filterOptions(!shared.isString(item.children) && !shared.isArray(item.children) && shared.isFunction((_b2 = item.children) == null ? void 0 : _b2.default) ? (_c = item.children) == null ? void 0 : _c.default() : item.children);\n          } else if (name === \"ElOption\") {\n            valueList.push((_d = item.props) == null ? void 0 : _d.value);\n          } else if (shared.isArray(item.children)) {\n            filterOptions(item.children);\n          }\n        });\n      }\n      if (children.length) {\n        filterOptions((_b = children[0]) == null ? void 0 : _b.children);\n      }\n      if (!lodashUnified.isEqual(valueList, cachedValueList)) {\n        cachedValueList = valueList;\n        if (select) {\n          select.states.optionValues = valueList;\n        }\n      }\n      return children;\n    };\n  }\n});\nexports[\"default\"] = ElOptions;","map":{"version":3,"names":["ElOptions","vue","defineComponent","name","setup","_","slots","select","inject","token","selectKey","cachedValueList","_a","_b","children","default","call","valueList","filterOptions","children2","shared","isArray","forEach","item","_a2","_b2","_c","_d","type","isString","isFunction","push","props","value","length","lodashUnified","isEqual","states","optionValues"],"sources":["../../../../../../packages/components/select/src/options.ts"],"sourcesContent":["import { defineComponent, inject } from 'vue'\nimport { isArray } from '@vue/shared'\nimport { isEqual } from 'lodash-unified'\nimport { isFunction, isString } from '@element-plus/utils'\nimport { selectKey } from './token'\nimport type { Component, VNode, VNodeNormalizedChildren } from 'vue'\n\nexport default defineComponent({\n  name: 'ElOptions',\n  setup(_, { slots }) {\n    const select = inject(selectKey)\n    let cachedValueList: any[] = []\n\n    return () => {\n      const children = slots.default?.()!\n      const valueList: any[] = []\n\n      function filterOptions(children?: VNodeNormalizedChildren) {\n        if (!isArray(children)) return\n        ;(children as VNode[]).forEach((item) => {\n          const name = ((item?.type || {}) as Component)?.name\n\n          if (name === 'ElOptionGroup') {\n            filterOptions(\n              !isString(item.children) &&\n                !isArray(item.children) &&\n                isFunction(item.children?.default)\n                ? item.children?.default()\n                : item.children\n            )\n          } else if (name === 'ElOption') {\n            valueList.push(item.props?.value)\n          } else if (isArray(item.children)) {\n            filterOptions(item.children)\n          }\n        })\n      }\n\n      if (children.length) {\n        filterOptions(children![0]?.children)\n      }\n\n      if (!isEqual(valueList, cachedValueList)) {\n        cachedValueList = valueList\n        if (select) {\n          select.states.optionValues = valueList\n        }\n      }\n\n      return children\n    }\n  },\n})\n"],"mappings":";;;;;;;;;;;AAKA,IAAAA,SAAA,GAAeC,GAAA,CAAAC,eAAe,CAAC;EAC7BC,IAAI,EAAE,WAAW;EACjBC,KAAKA,CAACC,CAAC,EAAE;IAAEC;EAAK,CAAE,EAAE;IAClB,MAAMC,MAAM,GAAGN,GAAA,CAAAO,MAAM,CAACC,KAAA,CAAAC,SAAS,CAAC;IAChC,IAAIC,eAAe,GAAG,EAAE;IACxB,OAAO,MAAM;MACX,IAAIC,EAAE,EAAEC,EAAE;MACV,MAAMC,QAAQ,GAAG,CAACF,EAAE,GAAGN,KAAK,CAACS,OAAO,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGH,EAAE,CAACI,IAAI,CAACV,KAAK,CAAC;MACvE,MAAMW,SAAS,GAAG,EAAE;MACpB,SAASC,aAAaA,CAACC,SAAS,EAAE;QAChC,IAAI,CAACC,MAAA,CAAAC,OAAO,CAACF,SAAS,CAAC,EACrB;QACFA,SAAS,CAACG,OAAO,CAAEC,IAAI,IAAK;UAC1B,IAAIC,GAAG,EAAEC,GAAG,EAAEC,EAAE,EAAEC,EAAE;UACpB,MAAMxB,IAAI,GAAG,CAACqB,GAAG,GAAG,CAACD,IAAI,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,IAAI,CAACK,IAAI,KAAK,EAAE,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGJ,GAAG,CAACrB,IAAI;UAC1F,IAAIA,IAAI,KAAK,eAAe,EAAE;YAC5Be,aAAa,CAAC,CAACE,MAAA,CAAAS,QAAQ,CAACN,IAAI,CAACT,QAAQ,CAAC,IAAI,CAACM,MAAA,CAAAC,OAAO,CAACE,IAAI,CAACT,QAAQ,CAAC,IAAIM,MAAA,CAAAU,UAAU,CAAC,CAACL,GAAG,GAAGF,IAAI,CAACT,QAAQ,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGW,GAAG,CAACV,OAAO,CAAC,GAAG,CAACW,EAAE,GAAGH,IAAI,CAACT,QAAQ,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGY,EAAE,CAACX,OAAO,EAAE,GAAGQ,IAAI,CAACT,QAAQ,CAAC;UACzN,CAAW,MAAM,IAAIX,IAAI,KAAK,UAAU,EAAE;YAC9Bc,SAAS,CAACc,IAAI,CAAC,CAACJ,EAAE,GAAGJ,IAAI,CAACS,KAAK,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGL,EAAE,CAACM,KAAK,CAAC;UACzE,CAAW,MAAM,IAAIb,MAAA,CAAAC,OAAO,CAACE,IAAI,CAACT,QAAQ,CAAC,EAAE;YACjCI,aAAa,CAACK,IAAI,CAACT,QAAQ,CAAC;UACxC;QACA,CAAS,CAAC;MACV;MACM,IAAIA,QAAQ,CAACoB,MAAM,EAAE;QACnBhB,aAAa,CAAC,CAACL,EAAE,GAAGC,QAAQ,CAAC,CAAC,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGD,EAAE,CAACC,QAAQ,CAAC;MACxE;MACM,IAAI,CAACqB,aAAA,CAAAC,OAAO,CAACnB,SAAS,EAAEN,eAAe,CAAC,EAAE;QACxCA,eAAe,GAAGM,SAAS;QAC3B,IAAIV,MAAM,EAAE;UACVA,MAAM,CAAC8B,MAAM,CAACC,YAAY,GAAGrB,SAAS;QAChD;MACA;MACM,OAAOH,QAAQ;IACrB,CAAK;EACL;AACA,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}