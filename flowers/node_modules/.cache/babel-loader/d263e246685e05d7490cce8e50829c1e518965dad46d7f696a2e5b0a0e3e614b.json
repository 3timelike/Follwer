{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nrequire('../../../utils/index.js');\nrequire('../../../constants/index.js');\nvar index$2 = require('../../icon/index.js');\nvar iconsVue = require('@element-plus/icons-vue');\nrequire('../../../hooks/index.js');\nvar constants = require('./constants.js');\nvar tabNav = require('./tab-nav.js');\nvar runtime = require('../../../utils/vue/props/runtime.js');\nvar shared = require('@vue/shared');\nvar types = require('../../../utils/types.js');\nvar event = require('../../../constants/event.js');\nvar index = require('../../../hooks/use-namespace/index.js');\nvar index$1 = require('../../../hooks/use-ordered-children/index.js');\nvar aria = require('../../../constants/aria.js');\nconst tabsProps = runtime.buildProps({\n  type: {\n    type: String,\n    values: [\"card\", \"border-card\", \"\"],\n    default: \"\"\n  },\n  closable: Boolean,\n  addable: Boolean,\n  modelValue: {\n    type: [String, Number]\n  },\n  editable: Boolean,\n  tabPosition: {\n    type: String,\n    values: [\"top\", \"right\", \"bottom\", \"left\"],\n    default: \"top\"\n  },\n  beforeLeave: {\n    type: runtime.definePropType(Function),\n    default: () => true\n  },\n  stretch: Boolean\n});\nconst isPaneName = value => shared.isString(value) || types.isNumber(value);\nconst tabsEmits = {\n  [event.UPDATE_MODEL_EVENT]: name => isPaneName(name),\n  tabClick: (pane, ev) => ev instanceof Event,\n  tabChange: name => isPaneName(name),\n  edit: (paneName, action) => [\"remove\", \"add\"].includes(action),\n  tabRemove: name => isPaneName(name),\n  tabAdd: () => true\n};\nconst Tabs = vue.defineComponent({\n  name: \"ElTabs\",\n  props: tabsProps,\n  emits: tabsEmits,\n  setup(props, {\n    emit,\n    slots,\n    expose\n  }) {\n    var _a;\n    const ns = index.useNamespace(\"tabs\");\n    const {\n      children: panes,\n      addChild: registerPane,\n      removeChild: unregisterPane\n    } = index$1.useOrderedChildren(vue.getCurrentInstance(), \"ElTabPane\");\n    const nav$ = vue.ref();\n    const currentName = vue.ref((_a = props.modelValue) != null ? _a : \"0\");\n    const setCurrentName = async (value, trigger = false) => {\n      var _a2, _b, _c;\n      if (currentName.value === value || types.isUndefined(value)) return;\n      try {\n        const canLeave = await ((_a2 = props.beforeLeave) == null ? void 0 : _a2.call(props, value, currentName.value));\n        if (canLeave !== false) {\n          currentName.value = value;\n          if (trigger) {\n            emit(event.UPDATE_MODEL_EVENT, value);\n            emit(\"tabChange\", value);\n          }\n          (_c = (_b = nav$.value) == null ? void 0 : _b.removeFocus) == null ? void 0 : _c.call(_b);\n        }\n      } catch (e) {}\n    };\n    const handleTabClick = (tab, tabName, event) => {\n      if (tab.props.disabled) return;\n      setCurrentName(tabName, true);\n      emit(\"tabClick\", tab, event);\n    };\n    const handleTabRemove = (pane, ev) => {\n      if (pane.props.disabled || types.isUndefined(pane.props.name)) return;\n      ev.stopPropagation();\n      emit(\"edit\", pane.props.name, \"remove\");\n      emit(\"tabRemove\", pane.props.name);\n    };\n    const handleTabAdd = () => {\n      emit(\"edit\", void 0, \"add\");\n      emit(\"tabAdd\");\n    };\n    vue.watch(() => props.modelValue, modelValue => setCurrentName(modelValue));\n    vue.watch(currentName, async () => {\n      var _a2;\n      await vue.nextTick();\n      (_a2 = nav$.value) == null ? void 0 : _a2.scrollToActiveTab();\n    });\n    vue.provide(constants.tabsRootContextKey, {\n      props,\n      currentName,\n      registerPane,\n      unregisterPane\n    });\n    expose({\n      currentName\n    });\n    return () => {\n      const addSlot = slots[\"add-icon\"];\n      const newButton = props.editable || props.addable ? vue.createVNode(\"span\", {\n        \"class\": ns.e(\"new-tab\"),\n        \"tabindex\": \"0\",\n        \"onClick\": handleTabAdd,\n        \"onKeydown\": ev => {\n          if (ev.code === aria.EVENT_CODE.enter) handleTabAdd();\n        }\n      }, [addSlot ? vue.renderSlot(slots, \"add-icon\") : vue.createVNode(index$2.ElIcon, {\n        \"class\": ns.is(\"icon-plus\")\n      }, {\n        default: () => [vue.createVNode(iconsVue.Plus, null, null)]\n      })]) : null;\n      const header = vue.createVNode(\"div\", {\n        \"class\": [ns.e(\"header\"), ns.is(props.tabPosition)]\n      }, [newButton, vue.createVNode(tabNav[\"default\"], {\n        \"ref\": nav$,\n        \"currentName\": currentName.value,\n        \"editable\": props.editable,\n        \"type\": props.type,\n        \"panes\": panes.value,\n        \"stretch\": props.stretch,\n        \"onTabClick\": handleTabClick,\n        \"onTabRemove\": handleTabRemove\n      }, null)]);\n      const panels = vue.createVNode(\"div\", {\n        \"class\": ns.e(\"content\")\n      }, [vue.renderSlot(slots, \"default\")]);\n      return vue.createVNode(\"div\", {\n        \"class\": [ns.b(), ns.m(props.tabPosition), {\n          [ns.m(\"card\")]: props.type === \"card\",\n          [ns.m(\"border-card\")]: props.type === \"border-card\"\n        }]\n      }, [...(props.tabPosition !== \"bottom\" ? [header, panels] : [panels, header])]);\n    };\n  }\n});\nexports[\"default\"] = Tabs;\nexports.tabsEmits = tabsEmits;\nexports.tabsProps = tabsProps;","map":{"version":3,"names":["tabsProps","runtime","buildProps","type","String","values","default","closable","Boolean","addable","modelValue","Number","editable","tabPosition","beforeLeave","definePropType","Function","stretch","tabsEmits","tabClick","pane","ev","Event","tabChange","name","isPaneName","edit","paneName","action","includes","tabRemove","tabAdd","Tabs","vue","defineComponent","props","emits","setup","emit","expose","_a","ns","index","useNamespace","children","panes","addChild","registerPane","removeChild","unregisterPane","index$1","useOrderedChildren","getCurrentInstance","nav$","ref","currentName","setCurrentName","value","trigger","_a2","_b","_c","canLeave","call","e","tab","disabled","tabName","event","handleTabRemove","types","isUndefined","stopPropagation","handleTabAdd","watch","nextTick","scrollToActiveTab","addSlot","slots","newButton","createVNode","code","aria","EVENT_CODE","enter","renderSlot","index$2","ElIcon","is","iconsVue","Plus","header","tabNav","handleTabClick","panels","b","m"],"sources":["../../../../../../packages/components/tabs/src/tabs.tsx"],"sourcesContent":["import {\n  defineComponent,\n  getCurrentInstance,\n  nextTick,\n  provide,\n  ref,\n  renderSlot,\n  watch,\n} from 'vue'\nimport {\n  buildProps,\n  definePropType,\n  isNumber,\n  isString,\n  isUndefined,\n} from '@element-plus/utils'\nimport { EVENT_CODE, UPDATE_MODEL_EVENT } from '@element-plus/constants'\nimport ElIcon from '@element-plus/components/icon'\nimport { Plus } from '@element-plus/icons-vue'\nimport { useNamespace, useOrderedChildren } from '@element-plus/hooks'\nimport { tabsRootContextKey } from './constants'\nimport TabNav from './tab-nav'\n\nimport type { TabNavInstance } from './tab-nav'\nimport type { TabsPaneContext } from './constants'\nimport type { ExtractPropTypes } from 'vue'\nimport type { Awaitable } from '@element-plus/utils'\n\nexport type TabPaneName = string | number\n\nexport const tabsProps = buildProps({\n  type: {\n    type: String,\n    values: ['card', 'border-card', ''],\n    default: '',\n  },\n  closable: Boolean,\n  addable: Boolean,\n  modelValue: {\n    type: [String, Number],\n  },\n  editable: Boolean,\n  tabPosition: {\n    type: String,\n    values: ['top', 'right', 'bottom', 'left'],\n    default: 'top',\n  },\n  beforeLeave: {\n    type: definePropType<\n      (newName: TabPaneName, oldName: TabPaneName) => Awaitable<void | boolean>\n    >(Function),\n    default: () => true,\n  },\n  stretch: Boolean,\n} as const)\nexport type TabsProps = ExtractPropTypes<typeof tabsProps>\n\nconst isPaneName = (value: unknown): value is string | number =>\n  isString(value) || isNumber(value)\n\nexport const tabsEmits = {\n  [UPDATE_MODEL_EVENT]: (name: TabPaneName) => isPaneName(name),\n  tabClick: (pane: TabsPaneContext, ev: Event) => ev instanceof Event,\n  tabChange: (name: TabPaneName) => isPaneName(name),\n  edit: (paneName: TabPaneName | undefined, action: 'remove' | 'add') =>\n    ['remove', 'add'].includes(action),\n  tabRemove: (name: TabPaneName) => isPaneName(name),\n  tabAdd: () => true,\n}\nexport type TabsEmits = typeof tabsEmits\n\nexport type TabsPanes = Record<number, TabsPaneContext>\n\nconst Tabs = defineComponent({\n  name: 'ElTabs',\n\n  props: tabsProps,\n  emits: tabsEmits,\n\n  setup(props, { emit, slots, expose }) {\n    const ns = useNamespace('tabs')\n\n    const {\n      children: panes,\n      addChild: registerPane,\n      removeChild: unregisterPane,\n    } = useOrderedChildren<TabsPaneContext>(getCurrentInstance()!, 'ElTabPane')\n\n    const nav$ = ref<TabNavInstance>()\n    const currentName = ref<TabPaneName>(props.modelValue ?? '0')\n\n    const setCurrentName = async (value?: TabPaneName, trigger = false) => {\n      // should do nothing.\n      if (currentName.value === value || isUndefined(value)) return\n\n      try {\n        const canLeave = await props.beforeLeave?.(value, currentName.value)\n        if (canLeave !== false) {\n          currentName.value = value\n          if (trigger) {\n            emit(UPDATE_MODEL_EVENT, value)\n            emit('tabChange', value)\n          }\n\n          nav$.value?.removeFocus?.()\n        }\n      } catch {}\n    }\n\n    const handleTabClick = (\n      tab: TabsPaneContext,\n      tabName: TabPaneName,\n      event: Event\n    ) => {\n      if (tab.props.disabled) return\n      setCurrentName(tabName, true)\n      emit('tabClick', tab, event)\n    }\n\n    const handleTabRemove = (pane: TabsPaneContext, ev: Event) => {\n      if (pane.props.disabled || isUndefined(pane.props.name)) return\n      ev.stopPropagation()\n      emit('edit', pane.props.name, 'remove')\n      emit('tabRemove', pane.props.name)\n    }\n\n    const handleTabAdd = () => {\n      emit('edit', undefined, 'add')\n      emit('tabAdd')\n    }\n\n    watch(\n      () => props.modelValue,\n      (modelValue) => setCurrentName(modelValue)\n    )\n\n    watch(currentName, async () => {\n      await nextTick()\n      nav$.value?.scrollToActiveTab()\n    })\n\n    provide(tabsRootContextKey, {\n      props,\n      currentName,\n      registerPane,\n      unregisterPane,\n    })\n\n    expose({\n      currentName,\n    })\n\n    return () => {\n      const addSlot = slots['add-icon']\n      const newButton =\n        props.editable || props.addable ? (\n          <span\n            class={ns.e('new-tab')}\n            tabindex=\"0\"\n            onClick={handleTabAdd}\n            onKeydown={(ev: KeyboardEvent) => {\n              if (ev.code === EVENT_CODE.enter) handleTabAdd()\n            }}\n          >\n            {addSlot ? (\n              renderSlot(slots, 'add-icon')\n            ) : (\n              <ElIcon class={ns.is('icon-plus')}>\n                <Plus />\n              </ElIcon>\n            )}\n          </span>\n        ) : null\n\n      const header = (\n        <div class={[ns.e('header'), ns.is(props.tabPosition)]}>\n          {newButton}\n          <TabNav\n            ref={nav$}\n            currentName={currentName.value}\n            editable={props.editable}\n            type={props.type}\n            panes={panes.value}\n            stretch={props.stretch}\n            onTabClick={handleTabClick}\n            onTabRemove={handleTabRemove}\n          />\n        </div>\n      )\n\n      const panels = (\n        <div class={ns.e('content')}>{renderSlot(slots, 'default')}</div>\n      )\n\n      return (\n        <div\n          class={[\n            ns.b(),\n            ns.m(props.tabPosition),\n            {\n              [ns.m('card')]: props.type === 'card',\n              [ns.m('border-card')]: props.type === 'border-card',\n            },\n          ]}\n        >\n          {...props.tabPosition !== 'bottom'\n            ? [header, panels]\n            : [panels, header]}\n        </div>\n      )\n    }\n  },\n})\n\nexport type TabsInstance = InstanceType<typeof Tabs> & {\n  currentName: TabPaneName\n}\n\nexport default Tabs\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}